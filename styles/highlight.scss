@use "sass:color";

@mixin cm($names...) {
    @for $i from 0 to length($names) {

        $name: nth($names, $i + 1);

        .cm-#{$name} {
            @content;
        }
    }
}

$alpha: 0.35;

$lineBgColor: var(--background-primary-alt);


@include cm("markplace-command") {
    font-size: 0.85em;
    font-family: var(--font-monospace);
    line-height: 1.3;
}

@mixin line-bg {
    background-color: $lineBgColor;
    left: 0px;
    right: 0px;
}

@include cm("markplace-inline-bg") {
    background-color: $lineBgColor;
}

// intentional
.markplace-line-bg {
    @include line-bg;
}


@include cm("markplace-obsidian-comment") {
    color: var(--code-comment, #696d70);
}

@include cm("markplace-tag") {
    color: color.change(#008bff, $alpha: $alpha);
}

@include cm("markplace-modifier-tag") {
    color: color.change(#c0d700, $alpha: $alpha);
}

@include cm("markplace-tag-content") {
    color: var(--code-normal, #f39b35);
}


@include cm("markplace-tag-end-content") {
    color: color.change(#fc4384, $alpha: $alpha);
}


@include cm("markplace-sep-tag", "markplace-tag-sep-content") {
    color: color.change(#fc4384, $alpha: $alpha);
}


@include cm("markplace-block-pre-content") {}

@include cm("markplace-block-post-content") {
    color: color.change(#696d70, $alpha: $alpha);
}

// ---------------------------------------




.cm-s-obsidian .markplace-command-bg {
    left: 0px;
    right: 0px;
    background-color: var(--background-primary-alt);
}

.cm-s-obsidian .cm-markplace-command {
    font-size: 0.85em;
    font-family: var(--font-monospace);
    line-height: 1.3;
}

.cm-s-obsidian .markplace-inline .cm-markplace-command {
    background-color: var(--background-primary-alt);
}

.cm-s-obsidian .cm-markplace-command.cm-markplace-open-tag-token {
    font-weight: bold;
}

.cm-s-obsidian .cm-markplace-command.cm-markplace-close-tag-token {
    font-weight: bold;
}

.cm-s-obsidian .cm-markplace-command.cm-markplace-interpolation-tag {
    color: var(--code-property, #008bff);
}

.cm-s-obsidian .cm-markplace-command.cm-markplace-execution-tag {
    color: var(--code-function, #c0d700);
}

.cm-s-obsidian .cm-markplace-command.cm-keyword {
    color: var(--code-keyword, #00a7aa);
    font-weight: normal;
}

.cm-s-obsidian .cm-markplace-command.cm-atom {
    color: var(--code-normal, #f39b35);
}

.cm-s-obsidian .cm-markplace-command.cm-value,
.cm-s-obsidian .cm-markplace-command.cm-number,
.cm-s-obsidian .cm-markplace-command.cm-type {
    color: var(--code-value, #a06fca);
}

.cm-s-obsidian .cm-markplace-command.cm-def,
.cm-s-obsidian .cm-markplace-command.cm-type.cm-def {
    color: var(--code-normal, var(--text-normal));
}

.cm-s-obsidian .cm-markplace-command.cm-property,
.cm-s-obsidian .cm-markplace-command.cm-property.cm-def .cm-s-obsidian .cm-markplace-command.cm-attribute {
    color: var(--code-function, #98e342);
}

.cm-s-obsidian .cm-markplace-command.cm-variable,
.cm-s-obsidian .cm-markplace-command.cm-variable-2,
.cm-s-obsidian .cm-markplace-command.cm-variable-3,
.cm-s-obsidian .cm-markplace-command.cm-meta {
    color: var(--code-property, #d4d4d4);
}

.cm-s-obsidian .cm-markplace-command.cm-callee,
.cm-s-obsidian .cm-markplace-command.cm-operator,
.cm-s-obsidian .cm-markplace-command.cm-qualifier,
.cm-s-obsidian .cm-markplace-command.cm-builtin {
    color: var(--code-operator, #fc4384);
}

.cm-s-obsidian .cm-markplace-command.cm-tag {
    color: var(--code-tag, #fc4384);
}

.cm-s-obsidian .cm-markplace-command.cm-comment,
.cm-s-obsidian .cm-markplace-command.cm-comment.cm-tag,
.cm-s-obsidian .cm-markplace-command.cm-comment.cm-attribute {
    color: var(--code-comment, #696d70);
}

.cm-s-obsidian .cm-markplace-command.cm-string,
.cm-s-obsidian .cm-markplace-command.cm-string-2 {
    color: var(--code-string, #e6db74);
}

.cm-s-obsidian .cm-markplace-command.cm-header,
.cm-s-obsidian .cm-markplace-command.cm-hr {
    color: var(--code-keyword, #da7dae);
}

.cm-s-obsidian .cm-markplace-command.cm-link {
    color: var(--code-normal, #696d70);
}

.cm-s-obsidian .cm-markplace-command.cm-error {
    border-bottom: 1px solid #c42412;
}